# SAST WoC 2026 - Rust Kernel Tetris Module

ä¸€ä¸ªä½¿ç”¨ Rust ç¼–å†™çš„ Linux å†…æ ¸ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆæ¨¡å—ï¼Œå±•ç¤ºäº†ç°ä»£å†…æ ¸ç¼–ç¨‹çš„å®‰å…¨æ€§å’Œé«˜æ•ˆæ€§ã€‚é€šè¿‡å­—ç¬¦è®¾å¤‡æ¥å£ä¸ç”¨æˆ·ç©ºé—´äº¤äº’ï¼Œå®ç°å®Œæ•´çš„æ¸¸æˆé€»è¾‘å’Œæ¸²æŸ“ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Linux å†…æ ¸å¼€å‘ç¤ºä¾‹ï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š

- **Rust å†…æ ¸æ¨¡å—**ï¼šä¿„ç½—æ–¯æ–¹å—æ¸¸æˆæ ¸å¿ƒé€»è¾‘ï¼Œå®Œå…¨åœ¨å†…æ ¸ç©ºé—´è¿è¡Œ
- **å­—ç¬¦è®¾å¤‡é©±åŠ¨**ï¼šé€šè¿‡ `/dev/tetris` ä¸ç”¨æˆ·ç©ºé—´é€šä¿¡
- **ç”¨æˆ·ç©ºé—´ç¨‹åº**ï¼šäº¤äº’å¼æ¸¸æˆå®¢æˆ·ç«¯
- **å®Œæ•´çš„ç¼–è¯‘ç³»ç»Ÿ**ï¼šæ”¯æŒå†…æ ¸ã€BusyBox å’Œç”¨æˆ·ç¨‹åºçš„ç»Ÿä¸€æ„å»º

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
woc2026-hello-from-skm/
â”œâ”€â”€ src/                       # Rust å†…æ ¸æ¨¡å—æºä»£ç 
â”‚   â”œâ”€â”€ module.rs             # æ¨¡å—å…¥å£å’Œåˆå§‹åŒ–
â”‚   â”œâ”€â”€ tetris.rs             # æ¸¸æˆé€»è¾‘å’Œè®¾å¤‡é©±åŠ¨
â”‚   â”œâ”€â”€ Kbuild                # å†…æ ¸æ„å»ºé…ç½®
â”‚   â””â”€â”€ rust-project.json     # Rust é¡¹ç›®é…ç½®
â”œâ”€â”€ tools/                    # ç”¨æˆ·ç©ºé—´ç¨‹åº
â”‚   â”œâ”€â”€ play_tetris.c         # æ¸¸æˆå®¢æˆ·ç«¯ï¼ˆCè¯­è¨€ï¼‰
â”‚   â””â”€â”€ play_tetris           # ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶
â”œâ”€â”€ linux/                    # Linux å†…æ ¸æºç ï¼ˆå­æ¨¡å—ï¼‰
â”œâ”€â”€ busybox/                  # BusyBox æºç ï¼ˆå­æ¨¡å—ï¼‰
â”œâ”€â”€ scripts/                  # è¾…åŠ©è„šæœ¬
â”‚   â”œâ”€â”€ setup.sh              # ç¯å¢ƒåˆå§‹åŒ–
â”‚   â”œâ”€â”€ run.sh                # QEMU å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ config-rootfs.sh      # rootfs é…ç½®è„šæœ¬
â”œâ”€â”€ Makefile                  # ç»Ÿä¸€ç¼–è¯‘è„šæœ¬
â”œâ”€â”€ qemu-busybox-min.config   # å†…æ ¸é…ç½®æ–‡ä»¶
â””â”€â”€ LICENSE                   # GPL-2.0 è®¸å¯è¯
```

## ğŸ“¦ ç¼–è¯‘å’Œå®‰è£…

### 1. ç¯å¢ƒå‡†å¤‡

ä½¿ç”¨ä»»æ„æ–¹å¼å®‰è£…æ‰€æœ‰å¼€å‘æ‰€éœ€è¦çš„ä¾èµ–  
`git curl make gcc clang ld.lld python3 bc bison flex pkg-config cpio gzip bindgen qemu-system-x86_64`

```bash
# åˆå§‹åŒ–å¼€å‘ç¯å¢ƒ
make setup
```

### 2. ç¼–è¯‘

```bash
# å®Œæ•´æ„å»ºï¼ˆç¼–è¯‘å†…æ ¸ã€BusyBoxã€å†…æ ¸æ¨¡å—ã€ç”¨æˆ·ç¨‹åºï¼‰
make build

# å¼ºåˆ¶é‡æ–°ç¼–è¯‘
make rebuild

# ä»…ç¼–è¯‘ç‰¹å®šç»„ä»¶
make kernel        # ç¼–è¯‘ Linux å†…æ ¸
make busybox       # ç¼–è¯‘ BusyBox
make module        # ç¼–è¯‘å†…æ ¸æ¨¡å—
make tools         # ç¼–è¯‘ç”¨æˆ·ç¨‹åº
```

### 3. è¿è¡Œ

```bash
# å¯åŠ¨ QEMU è™šæ‹Ÿæœºè¿è¡Œæ•´ä¸ªç³»ç»Ÿ
make run
```

### 4. åœ¨ QEMU ä¸­è¿è¡Œæ¸¸æˆ

```bash
# è¿è¡Œæ¸¸æˆ
play_tetris
```

## ğŸ“ ç¼–è¯‘æµç¨‹è¯¦è§£

### Makefile æ¶æ„

```makefile
build: kernel busybox module-install tools-install rootfs
  â”œâ”€ kernel           # ç¼–è¯‘ Linux å†…æ ¸
  â”œâ”€ busybox          # ç¼–è¯‘ BusyBox æ ¹æ–‡ä»¶ç³»ç»Ÿ
  â”œâ”€ module           # ç¼–è¯‘å†…æ ¸æ¨¡å—
  â”‚  â””â”€ module-install # å®‰è£…åˆ° rootfs
  â”œâ”€ tools            # ç¼–è¯‘ç”¨æˆ·ç¨‹åº
  â”‚  â””â”€ tools-install  # å®‰è£…åˆ° rootfs
  â””â”€ rootfs           # æ‰“åŒ…æ ¹æ–‡ä»¶ç³»ç»Ÿ
```

### ç¼–è¯‘äº§ç‰©

| æ–‡ä»¶ | ä½ç½® | ç”¨é€” |
|------|------|------|
| `bzImage` | `linux/arch/x86_64/boot/` | å†…æ ¸é•œåƒ |
| `.ko` | `src/` | å†…æ ¸æ¨¡å— |
| `play_tetris` | `tools/` | ç”¨æˆ·ç¨‹åº |
| `rootfs.img` | `busybox/` | æ ¹æ–‡ä»¶ç³»ç»Ÿ |

## ğŸ“š å‚è€ƒèµ„æ–™

### Linux å†…æ ¸ Rust å¼€å‘

- [Rust for Linux æ–‡æ¡£](https://docs.kernel.org/rust/)
- [Linux å†…æ ¸ API å‚è€ƒ](https://www.kernel.org/doc/html/latest/)
- [Rust å®˜æ–¹æ–‡æ¡£](https://doc.rust-lang.org/)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ GPL-2.0 è®¸å¯è¯ã€‚

## ğŸ™ è‡´è°¢

- NJUPT SAST
- Linux Kernel Rust å›¢é˜Ÿ
- Rust for Linux ç¤¾åŒº
